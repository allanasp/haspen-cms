includes:
    - ./vendor/nunomaduro/larastan/extension.neon
    - ./vendor/phpstan/phpstan-doctrine/extension.neon
    - ./vendor/phpstan/phpstan-strict-rules/rules.neon

parameters:
    level: 8
    paths:
        - app
        - config
        - database
        - routes

    # Exclude certain paths
    excludePaths:
        analyseAndScan:
            - 'app/Http/Middleware/*'
            - 'bootstrap'
            - 'storage'
            - 'vendor'

    # Ignore common Laravel patterns
    ignoreErrors:
        - '#Call to an undefined method Illuminate\\Database\\Eloquent\\Builder.*#'
        - '#Call to an undefined method Illuminate\\Http\\Request::validate\(\)#'
        - '#Access to an undefined property App\\Models\\.*::\$.*#'
        - '#Method App\\Http\\Controllers\\.*Controller::.*\(\) should return .*but returns.*#'

    # Check function calls with too many arguments
    checkTooWideReturnTypesInProtectedAndPublicMethods: true
    checkUninitializedProperties: true
    reportUnmatchedIgnoredErrors: false

    # Additional rules
    universalObjectCratesClasses:
        - Illuminate\Http\Request
        - Illuminate\Support\Collection
        - Illuminate\Database\Eloquent\Collection
        - Illuminate\Support\LazyCollection
        - Illuminate\Support\Enumerable
        - Illuminate\Support\Arr
        - Illuminate\Support\Str
        - Illuminate\Support\Carbon
        - Illuminate\Support\Facades\DB
        - Illuminate\Support\Facades\Schema
        - Illuminate\Support\Facades\Route
        - Illuminate\Support\Facades\Artisan
